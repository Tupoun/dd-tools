{% extends "base.html" %}

{% block title %}Diff - {{ app_name }}{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Diff</h2>
    <p>Porovnání dvou textů</p>
</div>

<div class="card">
    <form method="POST">
        <div style="display: flex; gap: 20px; margin-bottom: 20px;">
            <div style="flex: 1;">
                <label class="form-label">Text A</label>
                <textarea name="text1" class="form-control" rows="10" spellcheck="false">{{ form_data.get('text1', '') }}</textarea>
            </div>
            <div style="flex: 1;">
                <label class="form-label">Text B</label>
                <textarea name="text2" class="form-control" rows="10" spellcheck="false">{{ form_data.get('text2', '') }}</textarea>
            </div>
        </div>
        <button class="btn btn-primary">Porovnat</button>
    </form>
</div>

{% if result is not none %}
    {% if result.identical %}
    <div class="alert alert-success">Texty jsou identické.</div>
    {% else %}
    <div class="card">
        <h3>Rozdíly</h3>
        <pre style="font-size: 13px; line-height: 1.5; overflow-x: auto;">{% for line in result.lines
%}{% if line.type == 'header' %}<span style="color: var(--text-light);">{{ line.text }}</span>
{% elif line.type == 'hunk' %}<span style="color: var(--burgundy-main); font-weight: 600;">{{ line.text }}</span>
{% elif line.type == 'add' %}<span style="background: #d4edda; color: #155724; display: block;">+ {{ line.text }}</span>{% elif line.type == 'remove' %}<span style="background: #f8d7da; color: #721c24; display: block;">- {{ line.text }}</span>{% else %}<span style="color: var(--text-light);">  {{ line.text }}</span>
{% endif %}{% endfor %}</pre>
    </div>
    {% endif %}
{% endif %}
{% endblock %}
